import{r as x,a3 as e,ag as T,a7 as y,a0 as f,ac as h,ah as M,a1 as j,a6 as g,ai as N,aa as v,aj as $,ak as E,al as k,ab as A,ad as R,am as F,an as O,ae as B,af as w}from"./index-Bus6IHLE.js";import{M as V,C as b,a as I,A as L,F as D}from"./index-BcjxeqHL.js";let C;const U=({onTypingEnd:s,value:t})=>{const[n,a]=x.useState(t);x.useEffect(()=>{a(t)},[t]);const i=d=>{clearTimeout(C),C=setTimeout(()=>{s(d),y.success("Saved Successfully")},1e3)},l=d=>{a(d.target.value),i(d.target.value)};return e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("p",{className:"font-medium text-xs",children:"Write your answers here. It will be autosaved."}),e.jsx(T,{placeholder:"Answer..",autoSize:{minRows:10},value:n,onChange:l})]})};function _(s){return f({tag:"svg",attr:{version:"1.2",baseProfile:"tiny",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M11 20c-.801 0-1.555-.312-2.121-.879l-4-4c-.567-.566-.879-1.32-.879-2.121s.312-1.555.879-2.122c1.133-1.133 3.109-1.133 4.242 0l1.188 1.188 3.069-5.523c.526-.952 1.533-1.544 2.624-1.544.507 0 1.012.131 1.456.378.7.39 1.206 1.028 1.427 1.798.221.771.127 1.581-.263 2.282l-5 9c-.454.818-1.279 1.384-2.206 1.514-.139.019-.277.029-.416.029zm-4-8c-.268 0-.518.104-.707.293s-.293.439-.293.707.104.518.293.707l4 4c.223.221.523.33.844.283.312-.043.586-.232.737-.504l5-9c.13-.233.161-.503.088-.76-.073-.257-.243-.47-.478-.6-.473-.264-1.101-.078-1.357.388l-4.357 7.841-3.062-3.062c-.19-.189-.44-.293-.708-.293z"},child:[]}]})(s)}const H=({option:s,optionNumber:t,isSelected:n,onOptionClick:a})=>e.jsxs("div",{className:h("flex items-center gap-4 cursor-pointer hover:bg-slate-200/50 rounded-lg p-2 transition-colors ease-linear delay-[5ms]",n&&"border border-black border-1 font-bold"),onClick:()=>a(t,s),children:[e.jsx("div",{className:h("h-8 w-8 p-4 rounded-full bg-slate-400 flex items-center justify-center text-white"),children:t}),e.jsxs("div",{className:h("flex items-center justify-between w-full"),children:[e.jsx("div",{className:h(),children:s}),n&&e.jsx(_,{})]})]}),W=({options:s,selectedOption:t,onOptionClick:n})=>e.jsx("div",{className:h("flex flex-col gap-4 p-2"),children:s.map((a,i)=>e.jsx(H,{isSelected:t===i+1,option:a,optionNumber:i+1,onOptionClick:n},i))});function G(s){return f({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l192 192c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256 246.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192z"},child:[]}]})(s)}function Y(s){return f({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"},child:[]}]})(s)}function J(s){return f({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M64 32C64 14.3 49.7 0 32 0S0 14.3 0 32V64 368 480c0 17.7 14.3 32 32 32s32-14.3 32-32V352l64.3-16.1c41.1-10.3 84.6-5.5 122.5 13.4c44.2 22.1 95.5 24.8 141.7 7.4l34.7-13c12.5-4.7 20.8-16.6 20.8-30V66.1c0-23-24.2-38-44.8-27.7l-9.6 4.8c-46.3 23.2-100.8 23.2-147.1 0c-35.1-17.6-75.4-22-113.5-12.5L64 48V32z"},child:[]}]})(s)}const z="bg-[#5F6CE1] text-white px-4 py-2 rounded-lg flex gap-3 items-center justify-center hover:bg-[#5561CA]",K=({selectedQuestion:s,selectedQuestionNumber:t})=>e.jsxs("div",{className:"p-5 border-customBorder border rounded-lg grid gap-4 bg-white",children:[e.jsx("p",{children:`Question ${t+1}`}),e.jsx("b",{children:s.question})]}),X=({givenAnswer:s,selectedQuestionNumber:t})=>{const n=j(),a=g(o=>o.quizProgress.quizProgress),[i,l]=x.useState(!1),d=()=>{l(!0)},u=()=>{l(!1)},m=(o,r)=>{n(N({questionName:s.question,attemptedAnswer:r,optionNumber:o,givenOptions:s.answer.options,isMarked:!1}))},p=o=>{n(N({questionName:s.question,attemptedAnswer:o,givenOptions:s.answer.options,optionNumber:-1,isMarked:!1}))};return e.jsxs("div",{className:"h-full p-5 border-customBorder border rounded-lg bg-white",children:[a[t].answer.attemptedAnswers.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center justify-end text-sm cursor-pointer",onClick:d,children:e.jsx("p",{className:"border-black border border-1 rounded-sm px-2",children:"View Past Answer"})}),e.jsx(V,{title:"This is the past History of the users Attempted Answer for this Question: ",open:i,onOk:u,onCancel:u,onClose:u,children:a[t].answer.attemptedAnswers.map((o,r)=>e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{children:`${r+1}. `}),e.jsx("div",{className:"font-medium",children:o})]},r))})]}),e.jsx("div",{className:"grid gap-4 h-full min-h-64",children:s.answer.isMultichoice?e.jsx(W,{options:s.answer.options,onOptionClick:m,selectedOption:a[t].answer.optionNumber}):e.jsx(U,{value:a[t].answer.attemptedAnswers.slice(-1)[0],onTypingEnd:p})})]})},S=({selectedQuestion:s,selectedQuestionNumber:t,nextClick:n,prevClick:a})=>e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx(K,{selectedQuestion:s,selectedQuestionNumber:t}),e.jsx(X,{givenAnswer:M()[t],selectedQuestionNumber:t}),e.jsxs("div",{className:"pb-10 flex gap-10 justify-center",children:[e.jsxs("button",{className:z,onClick:a,children:[e.jsx(G,{})," Previous Question"]}),e.jsxs("button",{className:z,onClick:n,children:["Next Question ",e.jsx(Y,{})]})]})]}),Q=({currentQuestionNumber:s,answeredQuestions:t,questionCount:n,onTileClick:a})=>{const[i,l]=x.useState([-1]),d=Array.from({length:n}),u=o=>{l(r=>r.includes(o)?r:[...r,o])},m=o=>{l(r=>r.filter(c=>c!==o))},p=()=>{i.includes(s)?m(s):u(s)};return e.jsxs("div",{className:"flex flex-col gap-6 w-full h-min border-customBorder border rounded-lg p-6 bg-white",children:[e.jsxs("p",{children:["Question ",`${s}/${n}`]}),e.jsx("div",{className:"flex flex-wrap gap-3",children:d.map((o,r)=>e.jsx("div",{className:h("w-10 h-10 p-2 bg-gray-50 rounded-full flex items-center justify-center cursor-pointer",i.includes(r+1)&&"bg-indigo-300",t.includes(r+1)&&"bg-green-400",s===r+1&&"outline outline-2"),onClick:()=>a(r+1),children:r+1},r))}),e.jsxs("span",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>p(),children:[e.jsx("p",{className:"font-medium",children:i.includes(s)?"Unmark This Question":"Mark This Question"}),e.jsx(J,{})]})]})},P=(s=" ")=>{const t=new Date,n=t.getFullYear(),a=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0"),l=String(t.getHours()).padStart(2,"0"),d=String(t.getMinutes()).padStart(2,"0"),u=String(t.getSeconds()).padStart(2,"0"),m=`${n}-${a}-${i}`,p=`${l}:${d}:${u}`;return`${m}${s}${p}`},Z=()=>{const s=v(),t=j(),[n,a]=x.useState(0),i=g(r=>r.quizProgress.quizProgress),l=g(r=>r.auth.user),d=r=>{a(r-1)},u=()=>{n<i.length-1&&a(n+1)},m=()=>{n>0&&a(n-1)},p=()=>{const r={userEmail:l==null?void 0:l.email,attemptTime:P(),quiz:i};E(r),t(k()),s("/take-quiz/history")},o=()=>i.map((r,c)=>r.answer.isAnswered?c+1:null).filter(r=>r!==null);return i.length===0?(y.info("No question is set at this moment. Wait for admin to set question."),e.jsx($,{to:"/take-quiz/history"})):e.jsx(b,{title:"Take Quiz",children:e.jsxs("div",{className:h("grid grid-cols-[2fr_1fr] gap-10 sp:grid-cols-1 h-full"),children:[e.jsx(S,{selectedQuestionNumber:n,selectedQuestion:i[n],isPastQuiz:!1,nextClick:u,prevClick:m}),e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(Q,{currentQuestionNumber:n+1,answeredQuestions:o(),questionCount:i.length,onTileClick:d}),e.jsx("button",{className:"rounded-md bg-sky-900 hover:bg-sky-800 w-full p-2 text-white",onClick:p,children:"Submit"})]})]})})},ee=({attemptedQuizzes:s})=>{const t=v(),n=j();return e.jsx("div",{className:"grid grid-cols-4 gap-4 sp:grid-cols-1",children:s.map((a,i)=>e.jsxs(I,{className:h("h-44 w-full cursor-pointer px-5 py-4 flex flex-col gap-6 border-customBorder border"),onClick:()=>{n(k()),t(`/take-quiz/history/${i}`)},children:[e.jsxs("div",{className:h(""),children:[e.jsx("p",{className:"text-xs font-medium opacity-70 text-sky-950",children:"Attempt time"}),e.jsx("p",{className:"text-sm font-medium",children:a.attemptTime})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(L,{style:{verticalAlign:"middle"},size:"default",children:a.userEmail.charAt(0).toUpperCase()}),e.jsx("p",{children:a.userEmail})]}),e.jsxs("div",{className:"flex gap-4 mt-auto",children:[e.jsx("p",{className:"text-xs ml-auto font-medium text-orange-600",children:"more info"}),e.jsx(D,{color:"#EC7440"})]})]},i))})},se=()=>{const s=v(),t=g(a=>a.auth.user),n=A(t==null?void 0:t.email);return e.jsx(b,{title:"Taken Quizzes",children:e.jsxs("div",{className:h("grid gap-10"),children:[e.jsx("button",{className:"bg-[#5F6CE1] hover:bg-[#4e5cdb] text-white font-medium py-2 px-10 rounded-md justify-self-center",onClick:()=>{s("/take-quiz/attempt")},children:"Attempt Quiz"}),e.jsx(ee,{attemptedQuizzes:n})]})})},te=()=>{const s=v(),t=j(),n=g(c=>c.quizProgress.quizProgress),{responseId:a}=R();x.useEffect(()=>{if(a){const c=A()[parseInt(a)];t(F(c.quiz))}},[a,t]);const[i,l]=x.useState(0),d=g(c=>c.auth.user),u=c=>{l(c-1)},m=()=>{i<n.length-1&&l(i+1)},p=()=>{i>0&&l(i-1)},o=()=>{const c={userEmail:d==null?void 0:d.email,attemptTime:P(),quiz:n};O(c,parseInt(a)),t(k()),s("/take-quiz/history")},r=()=>n.map((c,q)=>c.answer.isAnswered?q+1:null).filter(c=>c!==null);return e.jsx(b,{title:"Take Quiz",children:e.jsxs("div",{className:h("grid grid-cols-[2fr_1fr] gap-10 sp:grid-cols-1 h-full"),children:[e.jsx(S,{isPastQuiz:!1,selectedQuestionNumber:i,selectedQuestion:n[i],nextClick:m,prevClick:p}),e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(Q,{currentQuestionNumber:i+1,answeredQuestions:r(),questionCount:n.length,onTileClick:u}),e.jsx("button",{className:"rounded-md bg-sky-900 hover:bg-sky-800 w-full p-2 text-white",onClick:o,children:"Update"})]})]})})},ie=()=>e.jsxs(B,{children:[e.jsx(w,{path:"/history",element:e.jsx(se,{})}),e.jsx(w,{path:"/history/:responseId",element:e.jsx(te,{})}),e.jsx(w,{path:"/attempt",element:e.jsx(Z,{})})]});export{ie as QuizPageRoutes};
